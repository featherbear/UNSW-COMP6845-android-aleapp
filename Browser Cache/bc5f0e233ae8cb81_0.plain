!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=56)}([function(e,t){var n=e.exports={version:"2.5.6"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"f",function(){return s}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"e",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return f});var r={CREATED:"created",DESTROYED:"destroyed",CLOSED:"closed",MESSAGE_RECEIVED:"messageReceived",MESSAGE_SENT:"messageSent",CUSTOM_RECEIVED:"customReceived",CONFIG_UPDATED:"configUpdated",STATE_CHANGED:"stateChanged",FIRST_TIME_USER:"newUser"},o=Object.values(r),s={FULLSCREEN:"fullscreen",SIDEBAR:"sidebar",POPUP:"popup"},i=Object.values(s),a=["mode","popupWidth","popupHeight","headerText","customPromptMessage","newChat","color","botIcon","allowBackgroundScroll","metadata","externalUserId","collectUserIpAddress","disableAttachments","disableInput","historyLimit","disableReset","themeCssUrl","customCssUrl","themeName","themeCssOnly","standalone","botId","widgetPosition"],c={CONFIG:"fxo-messenger-config",REQUEST_CONFIG:"fxo-messenger-config-request",CLOSE:"fxo-messenger-close",DESTROY:"fxo-messenger-destroy",SEND_MESSAGE:"fxo-messenger-send-message",STATE_UPDATE:"fxo-messenger-state-change",MESSAGE_RECEIVED:"fxo-messenger-message-received",MESSAGE_SENT:"fxo-messenger-message-sent",CUSTOM_RECEIVED:"fxo-messenger-custom-received",CONFIG_UPDATED:"fxo-messenger-config-updated",VIEW_MODE_CHANGED:"fxo-messenger-view-mode-updated",FIRST_TIME_USER:"fxo-messenger-new-user",CLEAR_HISTORY:"fxo-messenger-clear-history",FORGET_USER:"fxo-forget-user"},u="https://d2u2e8j2jrnyta.cloudfront.net",f="classic"},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e),this._handlers={}}return o(e,[{key:"on",value:function(e,t){this._handlers[e]=this._handlers[e]||[],this._handlers[e].push(t)}},{key:"emit",value:function(e,t){var n=this._handlers[e];n&&n.forEach(function(e){return e(t)})}},{key:"off",value:function(e,t){var n=this._handlers[e];if(n)for(var r=void 0;(r=n.indexOf(t))>-1;)n.splice(r,1)}},{key:"removeListeners",value:function(e){e?this._handlers[e]={}:this._handlers={}}}]),e}();t.a=s},function(e,t,n){e.exports=!n(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(12),o=n(8);e.exports=function(e){return r(o(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(2),o=n(0),s=n(11),i=n(41),a=n(30),c=function(e,t,n){var u,f,l,d,h=e&c.F,_=e&c.G,g=e&c.S,m=e&c.P,p=e&c.B,v=_?r:g?r[t]||(r[t]={}):(r[t]||{}).prototype,y=_?o:o[t]||(o[t]={}),b=y.prototype||(y.prototype={});_&&(n=t);for(u in n)f=!h&&v&&void 0!==v[u],l=(f?v:n)[u],d=p&&f?a(l,r):m&&"function"==typeof l?a(Function.call,l):l,v&&i(v,u,l,e&c.U),y[u]!=l&&s(y,u,d),m&&b[u]!=l&&(b[u]=l)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(36),o=n(40);e.exports=n(4)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(29);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(38),o=n(32);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";n(24),n(25),n(19)},function(e,t,n){"use strict";function r(e){var t={},n=e.indexOf("?");return n>-1&&(t=e.slice(n+1).split("&").reduce(function(e,t){var n=t.split("=");return 2===n.length&&(e[n[0]]=n[1]),e},{})),t}t.a=r},function(e,t,n){var r,o;"function"==typeof Symbol&&Symbol.iterator;/*! srcdoc-polyfill - v1.0.0 - 2017-01-29
 * http://github.com/jugglinmike/srcdoc-polyfill/
 * Copyright (c) 2017 Mike Pennisi; Licensed MIT */
!function(n,s){var i=window.srcDoc;r=[t],void 0!==(o=function(e){s(e,i),n.srcDoc=e}.apply(t,r))&&(e.exports=o)}(this,function(e,t){var n,r,o,s=!!("srcdoc"in document.createElement("iframe")),i="Polyfill may not function in the presence of the `sandbox` attribute. Consider using the `force` option.",a=/\ballow-same-origin\b/,c=function(e,t){var n=e.getAttribute("sandbox");"string"!=typeof n||a.test(n)||(t&&t.force?e.removeAttribute("sandbox"):t&&!1===t.force||(o(i),e.setAttribute("data-srcdoc-polyfill",i)))},u={compliant:function(e,t,n){t&&(c(e,n),e.setAttribute("srcdoc",t))},legacy:function(e,t,n){var r;e&&e.getAttribute&&(t?e.setAttribute("srcdoc",t):t=e.getAttribute("srcdoc"),t&&(c(e,n),r="javascript: window.frameElement.getAttribute('srcdoc');",e.contentWindow&&(e.contentWindow.location=r),e.setAttribute("src",r)))}},f=e;if(o=window.console&&window.console.error?function(e){window.console.error("[srcdoc-polyfill] "+e)}:function(){},f.set=u.compliant,f.noConflict=function(){return window.srcDoc=t,f},!s)for(f.set=u.legacy,r=document.getElementsByTagName("iframe"),n=r.length;n--;)f.set(r[n])})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return f.a.reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function c(e,t){return void 0===e||(t?t(e):e.length>0)}var u=n(3),f=n(1),l=n(23),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.manager=new l.a,n.id=e,n.EVENT_NAMES.forEach(function(e){n.manager.on(e,function(t){n.emit(e,t)})});var r=n;return n.on("created",function(){r.setConfig({metadata:{hostUrl:window.location.href}})}),n}return i(t,e),d(t,[{key:"sendMessage",value:function(e,t){if(!e)throw new Error("The message cannot be blank.");return this.manager.sendMessage(e,t||{})}},{key:"setConfig",value:function(e){var t=this;e=a(e);var n=c(e.mode,function(e){return t.MODES.indexOf(e)>-1}),r=c(e.headerText),o=c(e.customPromptMessage),s=c(e.color),i=c(e.botIcon),u=c(e.standalone,function(e){return!0===e}),f=c(e.allowBackgroundScroll,function(e){return!0===e}),l=c(e.botId),d=c(e.metadata,function(e){return e});return!!(n&&r&&s&&i&&u&&l&&f&&d&&o)&&(this.manager.setConfig(e),!0)}},{key:"getState",value:function(){return this.manager.getInstanceState()}},{key:"create",value:function(e){this.manager.createInstance(e,this.id)}},{key:"destroy",value:function(){return this.manager.destroyCurrent()}},{key:"clear",value:function(){return this.manager.clearCurrent()}},{key:"forget",value:function(){return this.manager.forget()}},{key:"toggle",value:function(){return this.manager.toggleCurrentState()}}]),t}(u.a);t.a=h;var _=[].concat(r(f.b));h.prototype.MODES=[].concat(r(f.c)),h.prototype.EVENT_NAMES=_,_.forEach(function(e){h.prototype["on"+(e[0].toUpperCase()+e.slice(1))]=function(t){t&&this.on(e,t)},h.prototype["off"+(e[0].toUpperCase()+e.slice(1))]=function(t){t&&this.off(e,t)}})},function(e,t,n){"use strict";function r(e,t,n){e=e?decodeURIComponent(e):o.g+"/"+(n||o.h)+".css",t&&(t=decodeURIComponent(t));var r='\n  <link\n  rel="stylesheet"\n  href="'+e+'"/>',s="";return t&&(s='\n   <link \n   rel="stylesheet"\n   href="'+t+'"/>'),'\n  <!DOCTYPE html>\n  <html lang="en">\n    <head>\n      <meta charset="UTF-8" />\n      <meta\n        name="viewport"\n        content="initial-scale=1.0, user-scalable=no, maximum-scale=1.0, width=device-width"\n      />\n      <meta http-equiv="X-UA-Compatible" content="ie=edge" />\n      <title>Flow XO Web Messenger</title>\n      '+r+"\n      "+s+'\n    </head>\n    <body>\n      <div id="app" class="web-messenger">\n        <div class="web-messenger-header">\n          <div class="web-messenger-title">\n            <div class="web-messenger-title-skeleton"></div>\n          </div>\n        </div>\n        <div class="web-messenger-messages">\n          <div class="web-messenger-message">\n            <div class="web-messenger-message-icon-placeholder"></div>\n            <div class="web-messenger-message-bubble">\n              <div class="web-messenger-typing">\n                <div class="bounce1"></div>\n                <div class="bounce2"></div>\n                <div class="bounce3"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <script src="https://widget.flowxo.com/messenger.dll.js"><\/script>\n      <script src="https://widget.flowxo.com/messenger.js"><\/script>\n    </body>\n  </html>\n  '}t.a=r;var o=n(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var __WEBPACK_IMPORTED_MODULE_0_common_event_emitter__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_1__Constants__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__index__=__webpack_require__(21),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),FullscreenThreshold=500,FxoMessenger=function(_EventEmitter){function FxoMessenger(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,FxoMessenger);var n=_possibleConstructorReturn(this,(FxoMessenger.__proto__||Object.getPrototypeOf(FxoMessenger)).call(this));return n.config=e,n.state="loading",n._eventHandler=n._processPostMessageCommands.bind(n),n.config.popupHeight&&""!==n.config.popupHeight.trim()&&!t&&(n.config.mode="popup"),n._addMessenger(t),n._addPostMessageListener(),n}return _inherits(FxoMessenger,_EventEmitter),_createClass(FxoMessenger,[{key:"destroy",value:function(){this.removeListeners(),this._removePostMessageListener(),this._removeMessenger()}},{key:"setConfig",value:function(e){this.config=e,this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.CONFIG,{config:e}),this._updateViewMode()}},{key:"getState",value:function(){var e=this.config,t=e.color,n=e.fullscreen,r=e.headerText,o=e.botIcon,s=e.disableAttachments,i=e.collectUserIpAddress,a=e.testConsole;return{state:this.state,color:t,fullscreen:n,headerText:r,botIcon:o,testConsole:a,disableAttachments:s,collectUserIpAddress:i}}},{key:"sendMessage",value:function(e,t){this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.SEND_MESSAGE,{text:e,metadata:t})}},{key:"_sendPostMessageCommand",value:function(e,t){var n=Object.assign({type:e},t);this._iframe.contentWindow.postMessage(n,"*")}},{key:"_processPostMessageCommands",value:function _processPostMessageCommands(payload){var message=payload.data;switch(message.type){case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.REQUEST_CONFIG:this.setConfig(this.config);break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.CLOSE:this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.CLOSED),this.destroy();break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.STATE_UPDATE:this.state=message.state,this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.STATE_CHANGED,this.state);break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.MESSAGE_RECEIVED:this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.MESSAGE_RECEIVED,message.message);break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.MESSAGE_SENT:this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.MESSAGE_SENT,message.message);break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.CUSTOM_RECEIVED:if(this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.CUSTOM_RECEIVED,message.custom),message.custom&&message.custom.body&&message.custom.body.eval&&message.custom.body.eval.length>0)try{eval(message.custom.body.eval)}catch(e){console.log("Could not eval custom javascript ("+message.custom.body.eval+") because of an error:"+e)}break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.CONFIG_UPDATED:this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.CONFIG_UPDATED);break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.FIRST_TIME_USER:this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.FIRST_TIME_USER)}}},{key:"_addMessenger",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.config.widgetPosition||"right",r="right"===n?"left":"right";this._usesExternalContainer=!!t,this._addStylesheet(),this._calcIsFullscreen();var o=this._getWidthAndHeightForMode(),s=o.width,i=o.height,a=this._getWidthAndHeightForContainer(),c=t||document.createElement("div"),u=document.createElement("iframe");if(this._element=u,this._usesExternalContainer||Object.assign(c,{id:" fxo-messenger-iframe-container",className:"fxo-messenger-iframe-container"}),Object.assign(u,{id:"fxo-messenger-iframe",className:"fxo-messenger-iframe",scrolling:"no",width:s,height:i,srcdoc:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__index__.a)(this.config.themeCssUrl,this.config.customCssUrl,this.config.themeName),allowFullscreen:!0,allowTransparency:!0}),Object.assign(u.style,(e={border:"none",position:"fixed",bottom:0},_defineProperty(e,n,0),_defineProperty(e,"z-index",9998),e)),!this.config.fullscreen&&!this._usesExternalContainer){var f;Object.assign(c.style,(f={width:a.width,height:a.height,position:"fixed"},_defineProperty(f,n,"0px"),_defineProperty(f,"bottom","0px"),_defineProperty(f,"z-index","9998"),_defineProperty(f,"box-shadow","0 1px 6px rgba(17, 54, 84, .04), 0 2px 32px rgba(17, 54, 84, .08)"),f)),Object.assign(u.style,_defineProperty({},"margin-"+r,"20px"))}c.appendChild(this._iframe);try{this.config.fullscreen&&document.body.classList.add("fxo-messenger-fullscreen"),this.config.allowBackgroundScroll||document.body.classList.add("fxo-messenger-noscroll")}catch(e){console.error("Error adding class to parent body element.",e)}this._containerElement=c,this._usesExternalContainer||document.body.appendChild(this._container)}},{key:"_getWidthAndHeightForMode",value:function(){var e=void 0,t="100%";switch(this.config.mode){case __WEBPACK_IMPORTED_MODULE_1__Constants__.f.FULLSCREEN:e="100%";break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.f.POPUP:e=this.config.popupWidth||400,t=this.config.popupHeight||400;break;default:e=this.config.fullscreen?"100%":this.config.popupWidth||400}return{width:e,height:t}}},{key:"_getWidthAndHeightForContainer",value:function(){var e=void 0,t="100%";switch(this.config.mode){case __WEBPACK_IMPORTED_MODULE_1__Constants__.f.FULLSCREEN:e="100%";break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.f.POPUP:e=this.config.popupWidth||"400px",t=this.config.popupHeight||"400px";break;default:e=this.config.fullscreen?"100%":this.config.popupWidth||"400px"}return{width:e,height:t}}},{key:"_updateViewMode",value:function(){Object.assign(this._element,this._getWidthAndHeightForMode()),this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.VIEW_MODE_CHANGED)}},{key:"_clearHistory",value:function(){this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.CLEAR_HISTORY)}},{key:"_forget",value:function(){this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.FORGET_USER)}},{key:"_removeMessenger",value:function(){this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.DESTROY),this._usesExternalContainer?this._iframe.remove():document.body.removeChild(this._container),this._removeStylesheet()}},{key:"_addPostMessageListener",value:function(){window.addEventListener("message",this._eventHandler)}},{key:"_removePostMessageListener",value:function(){window.removeEventListener("message",this._eventHandler)}},{key:"_addStylesheet",value:function(){var e=document.createElement("style");this._stylesheet=e,Object.assign(e,{id:"fxo-messenger-styles",type:"text/css"}),document.body.classList.add("fxo-messenger-open"),e.appendChild(document.createTextNode(".fxo-messenger-fullscreen {overflow:hidden;height:100%;width:100%;position:fixed} .fxo-messenger-noscroll {overflow:hidden!important}")),document.head.appendChild(e)}},{key:"_removeStylesheet",value:function(){try{document.body.classList.remove("fxo-messenger-fullscreen"),document.body.classList.remove("fxo-messenger-noscroll"),document.body.classList.remove("fxo-messenger-open")}catch(e){console.error("Error removing class from parent body element.",e)}document.head.removeChild(this._stylesheet)}},{key:"_calcIsFullscreen",value:function(){this.config.fullscreen=window.innerWidth<FullscreenThreshold}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"_container",get:function(){return this._containerElement}},{key:"_iframe",get:function(){return this._element}}]),FxoMessenger}(__WEBPACK_IMPORTED_MODULE_0_common_event_emitter__.a);__webpack_exports__.a=FxoMessenger},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(3),a=n(1),c=n(22),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"createInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._containerElement=t,this._removeExistingMessenger()&&console.warn("FxoMessenger:","Found another instance of FxoMessenger. Removing old instance. Installing new one.");var n=new c.a(this.config,t);return this._messengerInstance=n,n.on(a.d.CLOSED,function(){e._messengerInstance=void 0,e.emit(a.d.DESTROYED)}),a.b.forEach(function(t){n.on(t,function(n){e.emit(t,n)})}),this.emit(a.d.CREATED),!0}},{key:"destroyCurrent",value:function(){return!!this._removeExistingMessenger()}},{key:"clearCurrent",value:function(){var e=this._messengerInstance;e&&e._clearHistory()}},{key:"forget",value:function(){var e=this._messengerInstance;e&&e._forget()}},{key:"toggleCurrentState",value:function(){return!this._removeExistingMessenger()&&this.createInstance(this._containerElement)}},{key:"setConfig",value:function(e){var t=this.config||{},n=this.config&&this.config.metadata||{},r=Object.assign({},t,e),o=Object.assign({},n,e.metadata);r.metadata=o,this.config=r;var s=this._messengerInstance;s&&s.setConfig(this.config)}},{key:"getInstanceState",value:function(){var e=this._messengerInstance;return e&&e.getState()||{state:"detached"}}},{key:"sendMessage",value:function(e,t){var n=this._messengerInstance;return!!n&&n.sendMessage(e,t||{})}},{key:"_removeExistingMessenger",value:function(){var e=this._messengerInstance;return e&&(e.destroy(),this._messengerInstance=void 0,this.emit(a.d.DESTROYED)),!!e}},{key:"_messengerInstance",get:function(){return this._currentFxoMessenger},set:function(e){this._currentFxoMessenger=e}}]),t}(i.a);t.a=f},function(e,t,n){n(48),e.exports=n(0).Object.assign},function(e,t,n){n(49),e.exports=n(0).Object.values},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(7),o=n(45),s=n(44);e.exports=function(e){return function(t,n,i){var a,c=r(t),u=o(c.length),f=s(i,u);if(e&&n!=n){for(;u>f;)if((a=c[f++])!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(26);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(6),o=n(2).document,s=r(o)&&r(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=!n(4)&&!n(5)(function(){return 7!=Object.defineProperty(n(31)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=!1},function(e,t,n){"use strict";var r=n(13),o=n(37),s=n(14),i=n(46),a=n(12),c=Object.assign;e.exports=!c||n(5)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=i(e),c=arguments.length,u=1,f=o.f,l=s.f;c>u;)for(var d,h=a(arguments[u++]),_=f?r(h).concat(f(h)):r(h),g=_.length,m=0;g>m;)l.call(h,d=_[m++])&&(n[d]=h[d]);return n}:c},function(e,t,n){var r=n(27),o=n(33),s=n(47),i=Object.defineProperty;t.f=n(4)?Object.defineProperty:function(e,t,n){if(r(e),t=s(t,!0),r(n),o)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(10),o=n(7),s=n(28)(!1),i=n(42)("IE_PROTO");e.exports=function(e,t){var n,a=o(e),c=0,u=[];for(n in a)n!=i&&r(a,n)&&u.push(n);for(;t.length>c;)r(a,n=t[c++])&&(~s(u,n)||u.push(n));return u}},function(e,t,n){var r=n(13),o=n(7),s=n(14).f;e.exports=function(e){return function(t){for(var n,i=o(t),a=r(i),c=a.length,u=0,f=[];c>u;)s.call(i,n=a[u++])&&f.push(e?[n,i[n]]:i[n]);return f}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(2),o=n(11),s=n(10),i=n(16)("src"),a=Function.toString,c=(""+a).split("toString");n(0).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,n,a){var u="function"==typeof n;u&&(s(n,"name")||o(n,"name",t)),e[t]!==n&&(u&&(s(n,i)||o(n,i,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:a?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[i]||a.call(this)})},function(e,t,n){var r=n(43)("keys"),o=n(16);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(0),o=n(2),s=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(34)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(15),o=Math.max,s=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):s(e,t)}},function(e,t,n){var r=n(15),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(8);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(9);r(r.S+r.F,"Object",{assign:n(35)})},function(e,t,n){var r=n(9),o=n(39)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(53),s=n(18),i=n(52),a=document.querySelectorAll("script[data-fxo-widget]");if(!a.length)throw new Error("Script was not added correctly. Ensure the script contains data under the `data-fxo-widget` attribute.");var c=[],u=window.FxoMessengers||{};a.forEach(function(e){function t(e,t){if("sidebar"===e)return O.toggle();"inline"===e?(O.setConfig({mode:"fullscreen",standalone:!0}),O.create(t)):"overlay"===e&&(x?Object.assign(x.style,{display:"block"}):(x=document.createElement("div"),x.id="fxo-overlay",Object.assign(x.style,{width:"100%",height:"100%","background-color":"rgba(0,0,0,.8)","z-index":"9998",position:"fixed",left:0,top:0}),x.addEventListener("click",function(){O.destroy()}),M=document.createElement("div"),M.id="fxo-overlay-chat-container",Object.assign(M.style,{border:"none",position:"fixed",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)",width:"100%","max-width":"1024px",height:"100%","max-height":"800px"}),x.appendChild(M),O.setConfig({mode:"fullscreen"})),document.body.appendChild(x),document.body.classList.add("fxo-messenger-noscroll"),O.create(M))}function a(){x&&(Object.assign(x.style,{display:"none"}),document.body.classList.remove("fxo-messenger-noscroll"))}var f=n.i(i.a)(e.getAttribute("data-fxo-widget"));if(!f)throw new Error("Widget data was invalid.");var l=e.id||f.web.botId||"unknown";if(window.FxoMessengers&&window.FxoMessengers[l])return void console.log("Messenger already loaded ("+l+")");var d=e.getAttribute("data-hide-welcome-message-days");d&&(f.hideWelcomeForDays=d);var h=e.getAttribute("data-reveal-welcome-message-seconds");h&&(f.welcomeRevealAfterSecs=h);var _=e.getAttribute("data-hide-welcome-message-seconds");_&&(f.welcomeHideAfterSecs=_);var g=e.getAttribute("data-theme-css-url"),m=e.getAttribute("data-custom-css-url"),p=e.getAttribute("data-theme-name"),v=e.getAttribute("data-theme-css-only"),y=e.getAttribute("data-widget-icon-url"),b=e.getAttribute("data-target-element-selector"),E=e.getAttribute("data-widget-position"),w=e.getAttribute("data-embed-mode")||"sidebar";g&&(f.themeCssUrl=g),m&&(f.customCssUrl=m),p&&(f.themeName=p),v&&(f.themeCssOnly=!!v),y&&(f.widgetIconUrl=y),E&&(f.widgetPosition=E);var C=void 0;b||"sidebar"!==w||(C=new o.a(f));var O=new r.a(l);O.setConfig({botId:f.web.botId,allowBackgroundScroll:f.allowBackgroundScroll,popupHeight:f.popupHeight,themeCssUrl:f.themeCssUrl,customCssUrl:f.customCssUrl,themeName:f.themeName,themeCssOnly:f.themeCssOnly,widgetPosition:f.widgetPosition});var x=void 0,M=void 0;if(C)C.on("revealWebMessenger",function(){t("sidebar")}),O.on("destroyed",function(){C.sendMessageToWidget("widget:collapse")}),C.render(),window.FxoWidget=C.getPublicAPI();else if(b){var P=document.querySelector(b);if(!P)return void console.log("No target element with the selector "+b+" could be found. Your Flow XO bot cannot be embedded when the data-target-element attribute is set but does not exist.");"sidebar"===w?(O.on("destroyed",function(){P.classList.remove("fxo-messenger-active")}),P.addEventListener("click",function(){t("sidebar"),P.classList.add("fxo-messenger-active")})):"inline"===w&&t("inline",P),"overlay"===w&&(P.addEventListener("click",function(){t("overlay")}),O.on("destroyed",function(){a()}))}var A=n.i(s.a)(e.src),S=A.callback||f.callback;S&&window[S]&&c.push(S),u[l]=O,window.FxoMessenger=window.FxoMessenger||O}),window.FxoMessengers=u,c.forEach(function(e){window[e]()})},function(e,t,n){"use strict";function r(e){try{return JSON.parse(o.Base64.decode(e))}catch(e){console.warn("Data to decode was invalid:",e)}}t.a=r;var o=n(54);n.n(o)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=document.createTextNode(e),n=document.createElement("div");return n.appendChild(t),n.innerHTML}var a=n(3),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.processMessageFromWidget=n.processMessageFromWidget.bind(n),n.config={zIndex:9997};var s=void 0,a=e.web,c=a.label||"Web";return Object.assign(a,{key:"web",label:c,labelWidth:10*c.length}),s=a,n.config.channel=s,["theme","revealAfterSecs","welcomeRevealAfterSecs","welcomeHideAfterSecs","hideWelcomeForDays","userId","userPaidPlan","zIndex","popupHeight","themeCssUrl","customCssUrl","themeName","themeCssOnly","widgetIconUrl","widgetPosition"].forEach(function(t){e.hasOwnProperty(t)&&(n.config[t]=e[t])}),["welcomeText"].forEach(function(t){e.hasOwnProperty(t)&&(n.config[t]=i(e[t]))}),n}return s(t,e),c(t,[{key:"render",value:function(){if(!this.iframe){var e=this.config.widgetPosition||"right",t="\n        .fxo-widget-iframe {\n          border: none;\n          display: block;\n          position: fixed;\n          bottom: 15px;\n          "+e+": 0;\n          z-index: "+this.config.zIndex+";\n        }\n        @media (min-width: 769px) {\n          .fxo-widget-iframe {\n            "+e+": 10px;\n          }\n        }\n        @media (min-width: 1025px) {\n          .fxo-widget-iframe {\n            bottom: 25px;\n            "+e+": 20px;\n          }\n        }\n      ";if(this.config.themeCssUrl){var n=document.createElement("link");n.href=this.config.themeCssUrl,n.rel="preload",n.as="style",document.head.appendChild(n)}else{var r=document.createElement("link"),o=this.config.themeBaseUrl||"https://d2u2e8j2jrnyta.cloudfront.net",s=this.config.themeName||"classic";r.href=o+"/"+s+".css",r.rel="preload",r.as="style",document.head.appendChild(r)}if(this.config.customCssUrl){var i=document.createElement("link");i.href=this.config.customCssUrl,i.rel="preload",i.as="style",document.head.appendChild(i)}var a=document.createElement("style");a.type="text/css",a.appendChild(document.createTextNode(t)),document.head.appendChild(a),this.iframe=document.createElement("iframe"),this.iframe.id="fxo-widget-iframe",this.iframe.className="fxo-widget-iframe",this.iframe.scrolling="no",this.iframe.width=100,this.iframe.height=100,this.iframe.title="Chatbot",this.iframe.src="https://widget.flowxo.com/widget.html",this.iframe.allowFullscreen=!0,document.body.appendChild(this.iframe),window.addEventListener("message",this.processMessageFromWidget,!1)}}},{key:"destroy",value:function(){window.removeEventListener("message",this.processMessageFromWidget,!1),this.sendMessageToWidget("widget:destroy"),document.body.removeChild(this.iframe)}},{key:"processMessageFromWidget",value:function(e){var t=void 0;try{t=JSON.parse(e.data)}catch(e){return}switch(t.action){case"fxo-widget-ready":this.sendMessageToWidget("widget:init",this.config);break;case"fxo-widget-resize":this.iframe&&(this.iframe.width=t.payload.width,this.iframe.height=t.payload.height);break;case"fxo-widget-reveal-web-messenger":this.emit("revealWebMessenger")}}},{key:"sendMessageToWidget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.iframe&&this.iframe.contentWindow){var n=JSON.stringify({action:e,payload:t});this.iframe.contentWindow.postMessage(n,"*")}}},{key:"getPublicAPI",value:function(){return{destroy:this.destroy.bind(this)}}}]),t}(a.a);t.a=u},function(e,t){!function(n,r){"object"==typeof t&&void 0!==e?e.exports=r(n):"function"==typeof define&&define.amd?define(r):r(n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,function(t){"use strict";var n,r=t.Base64;if(void 0!==e&&e.exports)try{n=require("buffer").Buffer}catch(e){}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(o),i=String.fromCharCode,a=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?i(192|t>>>6)+i(128|63&t):i(224|t>>>12&15)+i(128|t>>>6&63)+i(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return i(240|t>>>18&7)+i(128|t>>>12&63)+i(128|t>>>6&63)+i(128|63&t)},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,u=function(e){return e.replace(c,a)},f=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[o.charAt(n>>>18),o.charAt(n>>>12&63),t>=2?"=":o.charAt(n>>>6&63),t>=1?"=":o.charAt(63&n)].join("")},l=t.btoa?function(e){return t.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,f)},d=n?n.from&&Uint8Array&&n.from!==Uint8Array.from?function(e){return(e.constructor===n.constructor?e:n.from(e)).toString("base64")}:function(e){return(e.constructor===n.constructor?e:new n(e)).toString("base64")}:function(e){return l(u(e))},h=function(e,t){return t?d(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):d(String(e))},_=function(e){return h(e,!0)},g=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),m=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return i(55296+(n>>>10))+i(56320+(1023&n));case 3:return i((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return i((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},p=function(e){return e.replace(g,m)},v=function(e){var t=e.length,n=t%4,r=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),o=[i(r>>>16),i(r>>>8&255),i(255&r)];return o.length-=[0,0,2,1][n],o.join("")},y=t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,v)},b=n?n.from&&Uint8Array&&n.from!==Uint8Array.from?function(e){return(e.constructor===n.constructor?e:n.from(e,"base64")).toString()}:function(e){return(e.constructor===n.constructor?e:new n(e,"base64")).toString()}:function(e){return p(y(e))},E=function(e){return b(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(){var e=t.Base64;return t.Base64=r,e};if(t.Base64={VERSION:"2.4.5",atob:y,btoa:l,fromBase64:E,toBase64:h,utob:u,encode:h,encodeURI:_,btou:p,decode:E,noConflict:w},"function"==typeof Object.defineProperty){var C=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",C(function(){return E(this)})),Object.defineProperty(String.prototype,"toBase64",C(function(e){return h(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",C(function(){return h(this,!0)}))}}return t.Meteor&&(Base64=t.Base64),void 0!==e&&e.exports?e.exports.Base64=t.Base64:"function"==typeof define&&define.amd&&define([],function(){return t.Base64}),{Base64:t.Base64}})},,function(e,t,n){n(17),e.exports=n(51)}]);
//# sourceMappingURL=embed.js.map